
; PICBASIC PRO(TM) Compiler 2.50, (c) 1998, 2007 microEngineering Labs, Inc. All Rights Reserved.  
_USED			EQU	1

	INCLUDE	"C:\PBP\16F877A.INC"


; Define statements.
#define		CODE_SIZE		 8
#define		LCD_DREG		 PORTB 
#define		LCD_DBIT		 4  
#define		LCD_RSREG		 PORTB 
#define		LCD_RSBIT		 2
#define		LCD_EREG		 PORTB 
#define		LCD_EBIT		 3

RAM_START       		EQU	00020h
RAM_END         		EQU	001EFh
RAM_BANKS       		EQU	00004h
BANK0_START     		EQU	00020h
BANK0_END       		EQU	0007Fh
BANK1_START     		EQU	000A0h
BANK1_END       		EQU	000EFh
BANK2_START     		EQU	00110h
BANK2_END       		EQU	0016Fh
BANK3_START     		EQU	00190h
BANK3_END       		EQU	001EFh
EEPROM_START    		EQU	02100h
EEPROM_END      		EQU	021FFh

R0              		EQU	RAM_START + 000h
R1              		EQU	RAM_START + 002h
R2              		EQU	RAM_START + 004h
R3              		EQU	RAM_START + 006h
R4              		EQU	RAM_START + 008h
R5              		EQU	RAM_START + 00Ah
R6              		EQU	RAM_START + 00Ch
R7              		EQU	RAM_START + 00Eh
R8              		EQU	RAM_START + 010h
FLAGS           		EQU	RAM_START + 012h
GOP             		EQU	RAM_START + 013h
RM1             		EQU	RAM_START + 014h
RM2             		EQU	RAM_START + 015h
RR1             		EQU	RAM_START + 016h
RR2             		EQU	RAM_START + 017h
T1              		EQU	RAM_START + 018h
_tiempo          		EQU	RAM_START + 01Ah
_X               		EQU	RAM_START + 01Ch
_t               		EQU	RAM_START + 01Eh
_y               		EQU	RAM_START + 01Fh
_z               		EQU	RAM_START + 020h
_PORTL           		EQU	 PORTB
_PORTH           		EQU	 PORTC
_TRISL           		EQU	 TRISB
_TRISH           		EQU	 TRISC
#define _bt1             	_PORTA??0
#define _bt2             	_PORTA??1
#define _led             	_PORTA??2
#define _PORTA??0        	 PORTA, 000h
#define _PORTA??1        	 PORTA, 001h
#define _PORTA??2        	 PORTA, 002h
	INCLUDE	"ENC.MAC"
	INCLUDE	"C:\PBP\PBPPIC14.LIB"

	MOVE?CB	007h, CMCON
	MOVE?CB	003h, TRISA
	MOVE?CB	000h, PORTA
	MOVE?CB	001h, _y

	LABEL?L	_CICLO	
	CMPNE?TCL	_bt1, 001h, L00001
	PAUSE?C	001F4h
	ADD?BCB	_t, 001h, _t
	CMPLE?BCL	_t, 018h, L00003
	MOVE?CB	000h, _t
	LABEL?L	L00003	
	LABEL?L	L00001	
	LCDOUT?C	0FEh
	LCDOUT?C	001h
	LCDOUT?C	0FEh
	LCDOUT?C	002h
	LCDOUT?C	050h
	LCDOUT?C	052h
	LCDOUT?C	04Fh
	LCDOUT?C	047h
	LCDOUT?C	052h
	LCDOUT?C	041h
	LCDOUT?C	04Dh
	LCDOUT?C	041h
	LCDOUT?C	052h
	LCDOUT?C	020h
	LCDOUT?C	054h
	LCDOUT?C	049h
	LCDOUT?C	045h
	LCDOUT?C	04Dh
	LCDOUT?C	050h
	LCDOUT?C	04Fh
	LCDOUT?C	0FEh
	LCDOUT?C	0C5h
	LCDOUTCOUNT?C	000h
	LCDOUTNUM?B	_t
	LCDOUTDEC?	
	LCDOUT?C	0FEh
	LCDOUT?C	0C8h
	LCDOUT?C	048h
	LCDOUT?C	04Fh
	LCDOUT?C	052h
	LCDOUT?C	041h
	LCDOUT?C	053h
	CMPNE?TCL	_bt2, 001h, L00005
	GOTO?L	_tiempoOn
	LABEL?L	L00005	
	PAUSE?C	032h
	GOTO?L	_CICLO

	LABEL?L	_tiempoOn	
	MUL?BCW	_t, 03Ch, _tiempo
	LCDOUT?C	0FEh
	LCDOUT?C	001h
	LCDOUT?C	0FEh
	LCDOUT?C	002h
	LCDOUT?C	054h
	LCDOUT?C	049h
	LCDOUT?C	04Dh
	LCDOUT?C	045h
	LCDOUT?C	020h
	LCDOUT?C	04Fh
	LCDOUT?C	04Eh
	LCDOUT?C	03Ah
	LCDOUT?C	020h
	LCDOUTCOUNT?C	000h
	LCDOUTNUM?B	_t
	LCDOUTDEC?	
	LCDOUT?C	048h
	LCDOUT?C	072h
	LCDOUT?C	0FEh
	LCDOUT?C	0C0h
	LCDOUT?C	045h
	LCDOUT?C	04Ch
	LCDOUT?C	041h
	LCDOUT?C	050h
	LCDOUT?C	053h
	LCDOUT?C	045h
	LCDOUT?C	044h
	LCDOUT?C	020h
	LCDOUT?C	054h
	LCDOUT?C	03Ah
	LCDOUT?C	020h
	LCDOUTCOUNT?C	000h
	LCDOUTNUM?B	_z
	LCDOUTDEC?	
	LCDOUT?C	048h
	LCDOUT?C	072h
	MOVE?CW	000h, _X
	LABEL?L	L00007	
	CMPGT?WWL	_X, _tiempo, L00008
	HIGH?T	_led
	PAUSE?C	0EA60h
	MUL?BCW	_y, 03Ch, T1
	CMPNE?WWL	_X, T1, L00009
	ADD?BCB	_y, 001h, _y
	DIV?WCB	_X, 03Ch, _z
	LCDOUT?C	0FEh
	LCDOUT?C	0C0h
	LCDOUT?C	045h
	LCDOUT?C	04Ch
	LCDOUT?C	041h
	LCDOUT?C	050h
	LCDOUT?C	053h
	LCDOUT?C	045h
	LCDOUT?C	044h
	LCDOUT?C	020h
	LCDOUT?C	054h
	LCDOUT?C	03Ah
	LCDOUT?C	020h
	LCDOUTCOUNT?C	000h
	LCDOUTNUM?B	_z
	LCDOUTDEC?	
	LCDOUT?C	048h
	LCDOUT?C	072h
	LABEL?L	L00009	
	NEXT?WCL	_X, 001h, L00007
	LABEL?L	L00008	
	LOW?T	_led
	MOVE?CB	000h, _t
	LCDOUT?C	0FEh
	LCDOUT?C	001h
	GOTO?L	_CICLO

	END
